{"version":3,"file":"static/js/124.ad851382.chunk.js","mappings":"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","sources":["api/advertsApi.js","constants/constants.js","hooks/useFavorites.js"],"sourcesContent":["// Libs\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://64849eb7ee799e321626def8.mockapi.io';\n\nexport const getAdverts = async (page = 1, limit = 8, signal = null) => {\n    const options = {\n        params: { limit, page },\n    };\n\n    if (signal) options.signal = signal;\n\n    const { data } = await axios.get('/adverts', options);\n\n    return data;\n};\n\nexport const updateAdvert = async (id, updates) => {\n    const { data } = await axios.put(`/adverts/${id}`, updates);\n\n    return data;\n};\n","export const LIMIT = 8;\nexport const CANCELED_ERROR = 'CanceledError';\nexport const ERROR_MESSAGE = 'Something went wrong... Please try again later.';\nexport const APOLOGIZE_MESSAGE =\n    \"Something's gone wrong, but we're working on it. We apologize for the inconvenience, but we're currently experiencing some issues. Please try again later.\";\nexport const LS_KEY_FAVORITES = 'favorites';\n","// Libs\nimport { useEffect, useState } from 'react';\n// Constants\nimport { ERROR_MESSAGE, LS_KEY_FAVORITES } from 'constants';\n// Api\nimport { updateAdvert } from 'api';\n\nexport const useFavorites = () => {\n    const [favorites, setFavorites] = useState(() => {\n        return JSON.parse(localStorage.getItem(LS_KEY_FAVORITES)) ?? [];\n    });\n\n    useEffect(() => {\n        if (favorites.length === 0) {\n            localStorage.removeItem(LS_KEY_FAVORITES);\n        } else {\n            localStorage.setItem(LS_KEY_FAVORITES, JSON.stringify(favorites));\n        }\n    }, [favorites]);\n\n    const toggleFavorites = async id => {\n        const isAlreadyInFavorites = favorites.some(item => item.id === id);\n\n        if (isAlreadyInFavorites) {\n            try {\n                const updates = { favorite: false };\n                await updateAdvert(id, updates);\n                setFavorites(prevState =>\n                    prevState.filter(item => item.id !== id)\n                );\n            } catch (error) {\n                throw new Error(ERROR_MESSAGE);\n            }\n        } else {\n            try {\n                const updates = { favorite: true };\n                const updatedAdvert = await updateAdvert(id, updates);\n                setFavorites(prevState => [updatedAdvert, ...prevState]);\n            } catch (error) {\n                throw new Error(ERROR_MESSAGE);\n            }\n        }\n    };\n\n    return [favorites, toggleFavorites];\n};\n"],"names":["axios","defaults","baseURL","getAdverts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","signal","options","_yield$axios$get","data","_args","arguments","wrap","_context","prev","next","params","limit","length","undefined","page","get","sent","abrupt","stop","apply","updateAdvert","_x","_x2","_ref2","_callee2","id","updates","_yield$axios$put","_context2","put","concat","LIMIT","CANCELED_ERROR","ERROR_MESSAGE","APOLOGIZE_MESSAGE","LS_KEY_FAVORITES","useFavorites","_useState","useState","_JSON$parse","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","favorites","setFavorites","useEffect","removeItem","setItem","stringify","_updates","updatedAdvert","some","item","favorite","prevState","filter","t0","Error","_toConsumableArray","t1"],"sourceRoot":""}